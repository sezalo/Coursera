---
title: "Coursera Regression Models Course Peer Reviewed Project"
author: "Sebastián ZL"
output: pdf_document
---
\pagebreak
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
cat("\014") 
library(datasets)
data(mtcars)
```
# EXECUTIVE SUMMARY 

This project aims to explore some features that affect fuel consumption in miles per gallon (MPG)  based on a  collection of cars (mtcars -  Motor Trend Car Road Tests) data set. This because Motor Trend Magazine is interested in exploring the relationship between a set of variables and miles per gallon (MPG). They are particularly interested in the following two questions:
- Is an automatic or manual transmission better for MPG?
- Quantifying how different is the MPG between automatic and manual transmissions?

## EXPLORATORY ANALYSIS 

```{r Resumen y graficos, echo=FALSE, fig.width = 4, fig.height = 3.2,fig.align = 'center'}
str(mtcars) #Resumen

mtcars$am.label <- factor(mtcars$am, labels=c("Automatic","Manual")) # 0=automatico, 1=manual Añade un label a la entrada variable de interés.

boxplot(mpg~am.label, data=mtcars, col="grey", ylab="Miles per gallon", xlab = "Transmission type", main="Miles per gallon by transmission type")
```

# ANALYSIS 
We proceed to see if theres a significant difference between average miles per galon beetwen the transmission type. 
```{r t-Test, echo=FALSE}
manu<-subset(mtcars,mtcars$am==1)
auto<-subset(mtcars,mtcars$am==0)
test<-t.test(auto$mpg,manu$mpg)
```
As we saw above, for a conventional significance level $\alpha=0.05$ under the null hypothesis of true diffence in means equal to zero, we \textbf{reject} this hypothesis with a p-value of 0.0014. This is also confirmed by the 95% confidence interval of  the means difference [-11.28,-3.20], which is not cointaining zero or near zero values. Now whe can proceed to calculate how different are the autonmyes.
```{r Univariate linear regression, echo=FALSE}
unifit<-lm(mtcars$mpg~as.factor(mtcars$am))
summary(unifit)
```

The regression coefficient  \textit{"as.factor(mtcars\$am)1"}; $\beta_{am}=7.24$  tell us that \textbf{manual cars have an 7.245mpg average above the automatica ones.} *** indicates that its p-value its contaiden in \textit{(0,001]} and its a statistically significant predictor. Unfurnately, as $R^2=0.3598$, only the 36% of the mpg variance its explained by the univariate model. Lets try another model including more predictors and their influence on it. 
```{r Multivariate Linear regression, echo=FALSE}
multifit<-lm(mpg~cyl+wt+as.factor(am) ,mtcars)
summary(multifit)
```
With a multivariate model, the residual variation its decreased as evidenced in the $R^2=0.8303$ obtained. Also note by the significance levels, that the \textit{gpm} its more strongthly dependant in \textit{cyl} and \textit{wt} rather than in \textit{am}. As well, \textit{am}its not a independat variable as its coeficient changes with the presence of ther other variables to $\beta_{am}=0.17$. A variance analysis can be found the Appendix.

\pagebreak
# APPENDIX 
```{r Append, echo=FALSE}
anova(multifit)
```